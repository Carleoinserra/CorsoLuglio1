<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
         function remove(nodo){
    
    var nodo = nodo;
    
    while (nodo.firstChild) {

        nodo.removeChild(nodo.firstChild);
    }
   
}

class dip {
    constructor(nome, mansione, stipendio, img){
        this.nome = nome;
        this.mansione = mansione;
        this.stipendio = stipendio;
        this.img = img;
    }
}
// quando viene caricata la pagina viene fatta partire la funzione gestore load
window.onload = gestoreLoad;

function gestoreLoad(){

// andiamo a creare un nuovo array vuoto di dipendenti
let listaD = new Array();
     
       let d1 = new dip("Ben Stiller", "attore", 90000, "ben.webp");
       let d2 = new dip("Adam Sendler", "attore", 90000, "adam.webp");
       let d3 = new dip("Jennifer Aniston","attrice", 90000, "jennifer.webp");
       listaD.push(d1);
       listaD.push(d2);
       listaD.push(d3);
     



     
    // prendiamo i due bottoni e associaziomo all'evento on click le funzioni 
    // inserisci e visualizza
    let btn = document.getElementById("btn");
    let btn1 = document.getElementById("btn1");
    let btn2 = document.getElementById("btn2");
    btn.onclick = inserisci;
    btn1.onclick = visualizza;
    btn2.onclick = cambia;
    // come variabile globale andiamo a prendere il nodo con id result
    let nodo = document.getElementById("result");
function popolaSelect(){
    let nodoSelect = document.getElementById("nome1");
    remove(nodoSelect);
    for (let i = 0; i < listaD.length; i++) {
        let nodoOption = document.createElement("option");
        nodoOption.textContent = listaD[i].nome;
        nodoOption.value = listaD[i].nome;
        nodoSelect.appendChild(nodoOption);
    }
}
popolaSelect();





    // nella funzione inserisci otteniamo i valori da input
// andiamo a creare una nuova istanza di dip con i valori inseriti dall'utente
// aggiungiamo il dipendente all'array
    function inserisci(){
let nome = document.getElementById("nome").value;
let mansione = document.getElementById("mans").value;
let stip = document.getElementById("stip").value;
let img = document.getElementById("img").value;
let d1 = new dip(nome, mansione, stip, img);
listaD.push(d1);
alert("dipendente aggiunto con successo");
var nodoS = document.getElementById("nome1");

popolaSelect();


    }
// nella funzione visualizza per ogni elemento presente nell'array
// andiamo a creare una card con i dati propri di ogni oggetto dipendente
    function visualizza(){

        remove(nodo);
        

        for (let i = 0; i < listaD.length; i++){
             
            let nodoCard = document.createElement("div");
            nodoCard.className = "card";
            nodoCard.style.width = "18rem";
            let nodoImg = document.createElement("img");
            nodoImg.src = listaD[i].img;
            nodoImg.className = "card-img-top";
            nodoCard.appendChild(nodoImg);
            let nodoCardBody = document.createElement("div");
            nodoCardBody.className = "card-body";
            nodoCard.appendChild(nodoCardBody);
            let nodoTitolo = document.createElement("h5");
            nodoTitolo.className = "card-title";
            nodoTitolo.textContent = listaD[i].nome;
            nodoCardBody.appendChild(nodoTitolo);
            let nodoText = document.createElement("p");
            nodoText.className = "card-text";
            
            nodoText.textContent = "ruolo: " + listaD[i].mansione + " cachet: " + listaD[i].stipendio;
            nodoCardBody.appendChild(nodoText);
            nodo.appendChild(nodoCard);


          
 
    
    
        }
    }
// cambia Ã¨ una funzione che serve per modificare un'immagine
// attraverso il nome dell'artista viene modifica l'immagine relativa
// se il nome dell'artista non viene trovato la funzione invia un messaggio
    function cambia(){
        let ok = 0;
        let nome = document.getElementById("nome1").value;
        let img = document.getElementById("img1").value;
        for (let i = 0; i < listaD.length; i++){
            if (listaD[i].nome == nome) {
                listaD[i].img = img;
                ok = 1;
            }
        }

        if (ok == 0){
            alert("Artista non trovato");
        }
        if (ok > 0){
            alert("Immagine modificata con successo");
        }

    }

}

    </script>
</head>
<body>
 <h1>Lista artisti</h1> 
 Inserisci il nome: <input type = "text" id = "nome">  <br><br>
 Inserisci la mansione: <input type = "text" id = "mans">  <br><br>
 Inserisci lo stipendio: <input type = "text" id = "stip">  <br><br>
 Inserisci l'immagine: <input type = "text" id = "img">  <br><br>
 <button id = "btn">Inserisci</button>
 <hr><hr>
 <button id = "btn1">Visualizza</button>
 <div id = "result"></div>
 <br><br>
 <hr>
 Inserisci nome dipendente da modificare <select id = "nome1"> </select><br><br>
 Inserisci la nuova immagine <input type = "text" id = "img1"><br><br>
 <button id = "btn2">Cambia</button>
</body>
</html>